<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SRP SHOPPING | Online Shopping India</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <style>
        :root { 
            --amz-navy: #232f3e; 
            --amz-light-navy: #37475a;
            --amz-orange: #febd69; 
            --amz-yellow: #ffd814;
            --bg: #e3e6e6; 
            --white: #ffffff;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Amazon Ember', Arial, sans-serif; background: var(--bg); color: #111; overflow-x: hidden; }

        /* PROFESSIONAL AUTH GATE */
        #auth-gate { position: fixed; inset: 0; background: var(--white); z-index: 10000; display: flex; flex-direction: column; align-items: center; padding-top: 20px; }
        .auth-logo { font-size: 28px; font-weight: 800; color: #000; margin-bottom: 20px; }
        .auth-logo span { color: var(--amz-orange); }
        .auth-box { width: 90%; max-width: 350px; border: 1px solid #ddd; padding: 25px; border-radius: 8px; background: #fff; }
        .auth-box h2 { margin: 0 0 15px; font-weight: 400; font-size: 28px; }
        .auth-box label { font-size: 13px; font-weight: 700; display: block; margin-bottom: 5px; }
        .auth-input { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #a6a6a6; border-radius: 3px; font-size: 14px; outline-color: #e77600; }
        
        /* PRO BUTTONS */
        .btn-amz-gold { background: linear-gradient(to bottom, #f7dfa5, #f0c14b); border: 1px solid #a88734; border-radius: 3px; padding: 10px; width: 100%; cursor: pointer; font-size: 13px; }
        .btn-amz-grey { background: linear-gradient(to bottom, #f7f8fa, #e7e9ec); border: 1px solid #adb1b8; border-radius: 3px; padding: 10px; width: 100%; margin-top: 15px; cursor: pointer; font-size: 13px; display: flex; align-items: center; justify-content: center; gap: 10px; }

        /* PRO HEADER */
        header { background: var(--amz-navy); position: sticky; top: 0; z-index: 9000; }
        .nav-main { display: flex; align-items: center; padding: 10px 15px; gap: 15px; }
        .nav-dots { font-size: 24px; color: #fff; cursor: pointer; }
        .nav-logo { color: #fff; font-size: 18px; font-weight: bold; flex-grow: 1; }
        .nav-logo span { color: var(--amz-orange); }
        .search-row { background: var(--amz-navy); padding: 0 10px 10px; }
        .search-bar { background: #fff; display: flex; border-radius: 4px; overflow: hidden; height: 40px; }
        .search-bar input { flex: 1; border: none; padding: 0 10px; outline: none; }
        .search-btn { background: var(--amz-orange); border: none; width: 45px; cursor: pointer; }

        /* APP PAGES */
        .section { display: none; padding-bottom: 80px; }
        .active-sec { display: block !important; }

        /* PRODUCT GRID */
        .p-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 10px; }
        .p-card { background: #fff; border-radius: 4px; padding: 12px; display: flex; flex-direction: column; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .p-card img { width: 100%; height: 140px; object-fit: contain; }
        .p-name { font-size: 14px; margin: 8px 0; height: 35px; overflow: hidden; }
        .p-price-row { display: flex; align-items: baseline; gap: 5px; }
        .p-price { font-size: 18px; font-weight: bold; }
        .p-mrp { font-size: 12px; text-decoration: line-through; color: #565959; }

        /* NAVIGATION BAR */
        nav.bottom-nav { position: fixed; bottom: 0; width: 100%; background: #fff; display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid #ddd; z-index: 9500; }
        .nav-link { text-align: center; color: #111; font-size: 11px; flex: 1; cursor: pointer; }
        .nav-link.active { color: #e77600; font-weight: bold; }

        /* ACCOUNT MANAGER */
        .acc-item { display: flex; justify-content: space-between; padding: 15px; background: #fff; border-bottom: 1px solid #eee; }
        .acc-btn { color: #007185; font-weight: bold; cursor: pointer; font-size: 13px; }
    </style>
</head>
<body>

<div id="auth-gate">
    <div class="auth-logo">srp-shopping<span>.in</span></div>
    <div class="auth-box">
        <h2>Sign-In</h2>
        <label>Email (phone for mobile accounts)</label>
        <input type="email" id="auth-email" class="auth-input" placeholder="example@gmail.com">
        <label>Password</label>
        <input type="password" id="auth-pass" class="auth-input" placeholder="At least 6 characters">
        <button class="btn-amz-gold" onclick="handleAuth()">Continue</button>
        <p style="font-size: 12px; margin-top: 15px; color: #555;">By signing in, you agree to SRP SHOPPING's Conditions of Use.</p>
    </div>
    <div style="width: 90%; max-width: 350px; text-align: center; margin-top: 20px;">
        <button class="btn-amz-grey" onclick="googleAuth()">
            <img src="https://www.gstatic.com/images/branding/product/1x/gsa_512dp.png" width="18"> Continue with Google
        </button>
    </div>
</div>

<div id="main-app" style="display:none;">
    <header>
        <div class="nav-main">
            <div class="nav-dots" onclick="openAdminMenu()">‚ãÆ</div>
            <div class="nav-logo">srp-shopping<span>.in</span></div>
            <div id="user-info" style="color:white; font-size:12px;">Hello, User</div>
        </div>
        <div class="search-row">
            <div class="search-bar">
                <input type="text" id="store-search" placeholder="Search SRP Shopping" onkeyup="searchStore()">
                <button class="search-btn">üîç</button>
            </div>
        </div>
    </header>

    <main id="home-sec" class="section active-sec">
        <div style="height:150px; background: linear-gradient(to bottom, var(--amz-navy), transparent); margin-bottom:-50px;"></div>
        <div id="product-container" class="p-grid"></div>
    </main>

    <section id="you-sec" class="section">
        <div style="padding:15px;">
            <h3>Your Accounts (Max 3)</h3>
            <div id="acc-list" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden;"></div>
            <button class="btn-amz-grey" style="width:auto; padding:5px 15px;" onclick="addAnotherAccount()">+ Add New Account</button>
        </div>
        <div style="padding:15px; background: #fff; margin-top: 10px;">
            <div onclick="toggleLegal('about')" style="padding:15px 0; border-bottom:1px solid #eee;">About Us <span style="float:right">Edit</span></div>
            <div onclick="toggleLegal('privacy')" style="padding:15px 0;">Privacy Policy <span style="float:right">Edit</span></div>
        </div>
    </section>

    <nav class="bottom-nav">
        <div class="nav-link active" onclick="showSec('home')">üè†<br>Home</div>
        <div class="nav-link" onclick="showSec('ai')">ü§ñ<br>Rishi AI</div>
        <div class="nav-link" onclick="showSec('wallet')">üí≥<br>Wallet</div>
        <div class="nav-link" onclick="showSec('you')">üë§<br>You</div>
    </nav>
</div>

<script>
    // --- YOUR EXACT FIREBASE CONFIG ---
    const firebaseConfig = {
        apiKey: "AIzaSyCHyu_nVnU-ewwXkpYOPqhwN64WPV7J6UM",
        authDomain: "srp-sketch.firebaseapp.com",
        databaseURL: "https://srp-sketch-default-rtdb.firebaseio.com",
        projectId: "srp-sketch",
        storageBucket: "srp-sketch.firebasestorage.app",
        messagingSenderId: "1094431391415",
        appId: "1:1094431391415:web:6ef0bcd2841373e20fd732",
        measurementId: "G-F67X6LWS7P"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();

    // --- AUTHENTICATION ENGINE ---
    auth.onAuthStateChanged(user => {
        if (user) {
            document.getElementById('auth-gate').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            document.getElementById('user-info').innerText = "Hello, " + (user.displayName || user.email.split('@')[0]);
            manageSession(user.email);
            loadStore();
        } else {
            document.getElementById('auth-gate').style.display = 'flex';
        }
    });

    function handleAuth() {
        const e = document.getElementById('auth-email').value;
        const p = document.getElementById('auth-pass').value;
        auth.signInWithEmailAndPassword(e, p).catch(err => alert(err.message));
    }

    function googleAuth() {
        auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());
    }

    function manageSession(email) {
        let accs = JSON.parse(localStorage.getItem('srp_sessions')) || [];
        if(!accs.includes(email)) {
            if(accs.length >= 3) accs.shift();
            accs.push(email);
        }
        localStorage.setItem('srp_sessions', JSON.stringify(accs));
        renderAccounts();
    }

    function renderAccounts() {
        const accs = JSON.parse(localStorage.getItem('srp_sessions')) || [];
        const container = document.getElementById('acc-list');
        container.innerHTML = "";
        accs.forEach(email => {
            container.innerHTML += `<div class="acc-item"><span>${email}</span><span class="acc-btn" onclick="switchAccount('${email}')">Switch</span></div>`;
        });
    }

    function switchAccount(email) {
        alert("Switching to " + email);
        auth.signOut();
    }
</script>
